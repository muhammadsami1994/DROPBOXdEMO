<!DOCTYPE html>
<html>
<head lang="en">
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/angular_material/0.8.3/angular-material.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=RobotoDraft:300,400,500,700,400italic">
    <script src="//cdnjs.cloudflare.com/ajax/libs/dropbox.js/0.10.2/dropbox.min.js"></script>
    <!--<script src="https://www.dropbox.com/static/api/2/dropins.js" id="dropboxjs" type="text/javascript" data-app-key="nvhm0a8vj61h0tz"></script>-->
    <meta charset="UTF-8">

</head>
<body>

    <script src="https://www.dropbox.com/static/api/dropbox-datastores-1.0-latest.js"></script>
    <!--<button id="writeButton">Click to create <code>hello.txt</code> in Dropbox.</button>-->
    <!--<button id="container">click here</button>-->
    <script src="https://www.dropbox.com/static/api/2/dropins.js" id="dropboxjs" data-app-key="1vdeca08zku2feb"></script>


    <button onclick="sami()">click here</button>
  <div id="container"></div> <a id="link">.</a>



<!-- Angular Material Dependencies -->
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-animate.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-aria.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angular_material/0.8.3/angular-material.min.js"></script>
    <script>
        var sami= function () {
            for(i=0; i<array.length;i++){
                alert(array[i])
            }
        }
        var array=[];
        var button = Dropbox.createChooseButton({
            success: function(files) {
                var linkTag = document.getElementById('link');
                array.push(linkTag);
                linkTag.tagName= files[0].link;
                linkTag.textContent = files[0].link;



            },
            linkType: 'direct'
        });


        document.getElementById('container').appendChild(button);
        function doHelloWorld() {
            client.writeFile('hello.txt', 'Hello, World!', function (error) {
                if (error) {
                    alert('Error: ' + error);
                } else {
                    alert('File written successfully!');
                }

            });
        }

        //Try to complete OAuth flow.
        Dropbox.authenticate({ interactive: false }, function (error, client) {
            if (error) {
                alert('Error: ' + error);
            }
        });

        if (client.isAuthenticated()) {
            doHelloWorld();
        }

        document.getElementById('writeButton').onclick = function () {
            Dropbox.authenticate(function (error, client) {
                if (error) {
                    alert('Error: ' + error);
                } else {
                    doHelloWorld();
                    alert('Authenticated Successfully')
                }
            });
        }
    </script>
</body>
</html>
<!DOCTYPE html>
<html>
<head lang="en">
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/angular_material/0.8.3/angular-material.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=RobotoDraft:300,400,500,700,400italic">
    <script src="//cdnjs.cloudflare.com/ajax/libs/dropbox.js/0.10.2/dropbox.min.js"></script>
    <meta charset="UTF-8">

</head>
<!--<body ng-app="" ng-init="x">-->
<body>


            <script src="https://www.dropbox.com/static/api/dropbox-datastores-1.0-latest.js"></script>
            <!--<button id="writeButton">Click to create <code>hello.txt</code> in Dropbox.</button>-->
            <!--<button id="container">click here</button>-->
            <script src="https://www.dropbox.com/static/api/2/dropins.js" id="dropboxjs" data-app-key="1vdeca08zku2feb"></script>



            <div id="container"></div>

            <a id="link"></a>

            <!--<div ng-repeat="x in Listarray">-->
                <!--{{ x }}-->
            <!--</div>-->


        <!-- Angular Material Dependencies -->
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
        <!--<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-animate.min.js"></script>-->
        <!--<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-aria.min.js"></script>-->
        <!--<script src="https://ajax.googleapis.com/ajax/libs/angular_material/0.8.3/angular-material.min.js"></script>-->
            <script>

                var button = Dropbox.createChooseButton({
                    success: function(files) {
                        var linkTag = document.getElementById('link');
                        linkTag.href= files[0].link;
                        linkTag.name= files[0].name;
                        alert(linkTag.name)
                        linkTag.textContent = files[0].link;
                        linkTag.extensions = ['.jpg','.png','.doc']
                        linkTag= " ";
                    },
                    linkType: 'direct'
                });
                document.getElementById('container').appendChild(button);
                function doHelloWorld() {
                    client.writeFile('hello.txt', 'Hello, World!', function (error) {
                        if (error) {
                            alert('Error: ' + error);
                        } else {
                            alert('File written successfully!');
                        }

                    });
                }

                //Try to complete OAuth flow.
        //        var Dropbox = new Dropbox.Client({key :'1vdeca08zku2feb' })
                Dropbox.authenticate({ interactive: false }, function (error, client) {
                    if (error) {
                        alert('Error: ' + error);
                    }
                });

                if (Dropbox.isAuthenticated()) {
                    doHelloWorld();
                }

        //        document.getElementById('writeButton').onclick = function () {
        //            Dropbox.authenticate(function (error, client) {
        //                if (error) {
        //                    alert('Error: ' + error);
        //                } else {
        //                    doHelloWorld();
        //                    alert('Authenticated Successfully')
        //                }
        //            });
        //        }
            </script>


    </body>
</html>